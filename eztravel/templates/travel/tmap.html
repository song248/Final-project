{% extends 'travel/index.html' %}

{% block content %}
{% load static %}
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=l7xx0bc558171c774e4ba754afa0476b3077"></script>
<script	src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript">
	// ë§µ ì†Œí™˜!!
	var map;

	// ëª…ì†Œì˜ ì •ë³´
	var x = JSON.parse('{{ x }}')[0];
	var y = JSON.parse('{{ y }}')[0];
	var name = '{{ name }}';
	console.log('ì´ë²ˆì— ì„ ì •ëœ ëª…ì†ŒëŠ” "'+name+'" ì…ë‹ˆë‹¤.')

	// ë§›ì§‘ì˜ ì •ë³´
	var x_rest = JSON.parse('{{ x_rest }}');
	var y_rest = JSON.parse('{{ y_rest }}');
	var n_rest = '{{ n_rest }}'.replaceAll('&#x27;', '').replace('[','').replace(']', '').split(',') // string -> list
	var p_rest = '{{ p_rest }}'.replaceAll('&#x27;', '').replace('[','').replace(']', '').split(',')
	var t_rest = '{{ t_rest }}'.replaceAll('&#x27;', '').replace('[','').replace(']', '').split(',')
	var s_rest = JSON.parse('{{ s_rest }}');
	var m_rest = '{{ m_rest }}'.replaceAll('&#x27;', '').replace('[','').replace(']', '').replaceAll('&amp;','&').split(',')
	var new_n_rest=[];
	for (var i=0;i<n_rest.length;i++) { new_n_rest.push(n_rest[i].trim()) } // ê¸€ì ì• ì¢Œìš° ê³µë°±ì„ ì œê±°
	n_rest = new_n_rest;
	var new_p_rest=[];
	for (var i=0;i<p_rest.length;i++) { new_p_rest.push(p_rest[i].trim()) } // ê¸€ì ì• ì¢Œìš° ê³µë°±ì„ ì œê±°
	p_rest = new_p_rest;
	var new_t_rest=[];
	for (var i=0;i<t_rest.length;i++) { new_t_rest.push(t_rest[i].trim()) } // ê¸€ì ì• ì¢Œìš° ê³µë°±ì„ ì œê±°
	t_rest = new_t_rest;
	var new_m_rest=[];
	for (var i=0;i<m_rest.length;i++) { new_m_rest.push(m_rest[i].trim()) } // ê¸€ì ì• ì¢Œìš° ê³µë°±ì„ ì œê±°
	m_rest = new_m_rest;

	// í¬í† ì¡´ì˜ ì •ë³´
	var x_photo = JSON.parse('{{ x_photo }}');
	var y_photo = JSON.parse('{{ y_photo }}');
	var n_photo = '{{ n_photo }}'.replaceAll('&#x27;', '').replace('[','').replace(']', '').split(',')
	var new_n_photo=[];
	for (var i=0;i<n_photo.length;i++) { new_n_photo.push(n_photo[i].trim()) }
	n_photo = new_n_photo;

	// ì¢Œí‘œì‚¬ì „
	var location_dict = {};
	location_dict[name] = [x, y] // ëª…ì†Œ ì •ë³´ë¥¼ ì‚¬ì „ì— ì¶”ê°€
	get_location([n_rest, x_rest, y_rest, p_rest, t_rest, s_rest, m_rest])
	get_location([n_photo, x_photo, y_photo])
	console.log('location_dict', location_dict)

	// ë§ˆì»¤ë“¤ì„ ì €ì¥í•  ë°°ì—´ì…ë‹ˆë‹¤.
	var markers = [];

	// ì²´í¬ë°•ìŠ¤ í´ë¦­
	var r_checkbox_list=[];
	var p_checkbox_list=[];
	var checkbox_list = [];

	// ì²´í¬ë°•ìŠ¤ì—ì„œ ì„ íƒëœ ì¥ì†Œë“¤ê³¼ ëª…ì†Œ ( ì¦‰, ì„ ì •ëœ ëª¨ë“  ê²½ë¡œ )
	var points = [];

	// ì„ ì„ ê·¸ë¦¬ê¸° ìœ„í•´
	var resultdrawArr = []; 

	var p_to_p = {}; // ì¥ì†Œê°„ì˜ ê±°ë¦¬ ì €ì¥

	// í˜ì´ì§€ê°€ ë¡œë”©ì´ ëœ í›„ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
	function initTmap(){
		show_location_info(); // ìš°ì¸¡ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
		
		// map ìƒì„±
		map = new Tmapv2.Map("map_div", {
            center: new Tmapv2.LatLng(36.4, 127.9), // ì§€ë„ ì´ˆê¸° ì¢Œí‘œ
            zoom: 8, // ì§€ë„ í™•ëŒ€
            zoomControl:true,
            scrollwheel:true,
            width: "750px", // mapì˜ width ì„¤ì •
            height: "650px" // mapì˜ height ì„¤ì •
         });
		addMarker(); // ëª…ì†Œ ë§ˆì»¤ ì°ëŠ” í•¨ìˆ˜
		moveCenter(); // ì¢Œí‘œë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì§€ë„ ì´ë™

		// ë²„íŠ¼ í´ë¦­ì‹œ í™œì„±í™”
		$('#btn_select').click(function(e){
			e.preventDefault();
			checkbox_list = check_to_name() // checklistì—ì„œ ë‚˜ì˜¨ ê²ƒì„ ì €ì¥
			// console.log('checkbox_list', checkbox_list)

			addCheckMarkers(checkbox_list);

			points = [name, ...checkbox_list]
			// console.log(points)

			// ìƒì„±í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ê²½ë¡œì˜ ìˆœì—´
			var point_route = getPermutations(points, points.length)
			console.log('ì´ì–´ì§ˆ ìˆ˜ ìˆëŠ” ëª¨ë“  ê²½ìš° >> ', point_route)

			get_distance()

			console.log('ê±°ë¦¬ ì‚¬ì „ complete >> ', p_to_p) // ê±°ë¦¬ ì‚¬ì „ ì™„ì„± í™•ì¸

			var point_route_list = []; // ê²½ë¡œë‹¹ ê±°ë¦¬

			for (var i=0; i<point_route.length;i++) {
				var len_point_routes = 0;

				for (var j=0; j<point_route[i].length-1;j++) {
					// console.log(point_route[i][j], point_route[i][j+1])
					var atob = point_route[i][j] +','+ point_route[i][j+1]
					var len_point_route = p_to_p[atob] // ì‚¬ì „ì—ì„œ ê±°ë¦¬ ê²€ìƒ‰
					// console.log('ì‚¬ì „[', atob ,'] =', len_point_route)
					len_point_routes += len_point_route
				}
				point_route_list.push([point_route[i], len_point_routes]) // ê²½ë¡œìˆœì„œì´ë¦„, ê±°ë¦¬í•©
			}

			// ìµœë‹¨ ê±°ë¦¬ ì°¾ê¸° 
			var shortest_route=['', 1000000000000000000]; // ì €ì¥í•˜ê¸° ìš©
			for (var i in point_route_list) {
				if (point_route_list[i][1] < shortest_route[1]) {
					console.log('point_route_list[i]', point_route_list[i])
					shortest_route = point_route_list[i]
				}
			}
			
			console.log('ìµœë‹¨ ê²½ë¡œ ê²½ë¡œ >>', shortest_route[0])
			console.log('ìµœë‹¨ ê²½ë¡œ ê±°ë¦¬ >>', shortest_route[1])
			var how_km = shortest_route[1].toFixed(2);
			var how_route = "";
			var route_order = shortest_route[0][0];
			for (var i=1;i<shortest_route[0].length;i++) {
				route_order += ' â†’ '
				route_order += shortest_route[0][i]
			}
			how_route = route_order

			// ì„  ê·¸ë ¤ì£¼ê¸°
			for (var i=0;i<shortest_route[0].length-1;i++) {
				var drawInfoArr = [];
				$.ajax({
					type : "POST",
					url : "https://apis.openapi.sk.com/tmap/routes?version=1&format=json&callback=result",
					async : false,
					data : {
						"appKey" : "l7xx0bc558171c774e4ba754afa0476b3077",
						"startX" : String(location_dict[shortest_route[0][i]][0]),
						"startY" : String(location_dict[shortest_route[0][i]][1]),
						"endX" : String(location_dict[shortest_route[0][i+1]][0]),
						"endY" : String(location_dict[shortest_route[0][i+1]][1]),
						"reqCoordType" : "WGS84GEO",
						"resCoordType" : "EPSG3857",
					},
					success : function(response) {
						var resultData = response.features;

						for (var rd in resultData) { 
							var geometry = resultData[rd].geometry;
							
							if (geometry.type == "LineString") {
								for ( var j in geometry.coordinates) {
									// ê²½ë¡œë“¤ì˜ ê²°ê³¼ê°’ë“¤ì„ í¬ì¸íŠ¸ ê°ì²´ë¡œ ë³€í™˜ 
									var latlng = new Tmapv2.Point(
											geometry.coordinates[j][0],
											geometry.coordinates[j][1]);
									// í¬ì¸íŠ¸ ê°ì²´ë¥¼ ë°›ì•„ ì¢Œí‘œê°’ìœ¼ë¡œ ë³€í™˜
									var convertPoint = new Tmapv2.Projection.convertEPSG3857ToWGS84GEO(
											latlng);
									// í¬ì¸íŠ¸ê°ì²´ì˜ ì •ë³´ë¡œ ì¢Œí‘œê°’ ë³€í™˜ ê°ì²´ë¡œ ì €ì¥
									var convertChange = new Tmapv2.LatLng(
											convertPoint._lat,
											convertPoint._lng);
									// ë°°ì—´ì— ë‹´ê¸°
									drawInfoArr.push(convertChange);
								}
								drawLine(drawInfoArr, i);
							}
						}
						$("#roro").show();
						$("#region_info").show();
						$("return_upload").show();
						$("#btn_select").hide();
						$('#how_km').html(how_km);
						$('#how_route').html(how_route);
						$("show_km").show();
					},
					beforeSend:function(){
						console.log('beforesend')
					},
				}); // ---------- ì—¬ê¸° ê¹Œì§€ê°€ ajax
				sleep(500);
			}
		}); // ------ ì—¬ê¸°ê¹Œì§€ê°€ ë²„íŠ¼
	}

	// ì¥ì†Œë“¤ì— ëŒ€í•œ ì¢Œí‘œ ì‚¬ì „ ë§Œë“¤ê¸°
	function get_location(info) {
		for (var i=0;i<info[0].length;i++) {
			if (info.length == 3) {
				location_dict[info[0][i]] = [info[1][i], info[2][i]]
			} else if (info.length == 4) {
				location_dict[info[0][i]] = [info[1][i], info[2][i], info[3][i]]
			} else if (info.length == 5) {
				location_dict[info[0][i]] = [info[1][i], info[2][i], info[3][i], info[4][i]]
			} else if (info.length == 6) {
				location_dict[info[0][i]] = [info[1][i], info[2][i], info[3][i], info[4][i], info[5][i]]
			} else if (info.length == 7) {
				location_dict[info[0][i]] = [info[1][i], info[2][i], info[3][i], info[4][i], info[5][i], info[6][i]]
			}
		}
	}
	// ìš°ì¸¡ ì²´í¬ë¦¬ìŠ¤íŠ¸ í…ìŠ¤íŠ¸ ë„ìš°ê¸°
	function show_location_info() {
		var first_link = "<a href='https://map.naver.com/v5/search/"+n_rest[0]+"'>"+n_rest[0]+"</a>"
		$("#first_res_link").html(first_link);
		$("#first_restaurant").text(' (â­'+s_rest[0]+') '+' / ëŒ€í‘œë©”ë‰´: '+m_rest[0]);
		$("#first_restaurant_time").text('ì˜ì—…ì‹œê°„: '+t_rest[0]);
		$("#first_restaurant_tel").text('â˜Tel: '+p_rest[0]);

		var second_link = "<a href='https://map.naver.com/v5/search/"+n_rest[1]+"'>"+n_rest[1]+"</a>"
		$("#second_res_link").html(second_link);
		$("#second_restaurant").text(' (â­'+s_rest[1]+') '+' / ëŒ€í‘œë©”ë‰´: '+m_rest[1]);
		$("#second_restaurant_time").text('ì˜ì—…ì‹œê°„: '+t_rest[1]);
		$("#second_restaurant_tel").text('â˜Tel: '+p_rest[1]);

		var third_link = "<a href='https://map.naver.com/v5/search/"+n_rest[2]+"'>"+n_rest[2]+"</a>"
		$("#third_res_link").html(third_link);
		$("#third_restaurant").text(' (â­'+s_rest[2]+') '+' / ëŒ€í‘œë©”ë‰´: '+m_rest[2]);
		$("#third_restaurant_time").text('ì˜ì—…ì‹œê°„: '+t_rest[2]);
		$("#third_restaurant_tel").text('â˜Tel: '+p_rest[2]);

		var forth_link = "<a href='https://map.naver.com/v5/search/"+n_rest[3]+"'>"+n_rest[3]+"</a>"
		$("#forth_res_link").html(forth_link);
		$("#forth_restaurant").text(' (â­'+s_rest[3]+') '+' / ëŒ€í‘œë©”ë‰´: '+m_rest[3]);
		$("#forth_restaurant_time").text('ì˜ì—…ì‹œê°„: '+t_rest[3]);
		$("#forth_restaurant_tel").text('â˜Tel: '+p_rest[3]);

		
		var first_photo = "<a href='https://map.naver.com/v5/search/"+n_photo[0]+"'>"+n_photo[0]+"</a>"
		$("#first_photozone").html(first_photo);

		var second_photo = "<a href='https://map.naver.com/v5/search/"+n_photo[1]+"'>"+n_photo[1]+"</a>"
		$("#second_photozone").html(second_photo);

		var third_photo = "<a href='https://map.naver.com/v5/search/"+n_photo[2]+"'>"+n_photo[2]+"</a>"
		$("#third_photozone").html(third_photo);
	}

	// ëª…ì†Œ ìœ„ì¹˜ì— ë§ˆí¬ ì°ì–´ì£¼ê¸°
	function addMarker() {
		var marker = new Tmapv2.Marker({
			position: new Tmapv2.LatLng(y, x), //Markerì˜ ì¤‘ì‹¬ì¢Œí‘œ ì„¤ì •.
			icon: "http://tmapapis.sktelecom.com/upload/tmap/marker/pin_r_m_m.png", // icon ì•„ì´ì½˜ í˜•ì‹  "http://tmapapis.sktelecom.com/upload/tmap/marker/pin_b_m_" + i + ".png"
			iconSize: new Tmapv2.Size(30, 45), // icon ì‚¬ì´ì¦ˆ ì¡°ì ˆ
			label: name, // Markerì˜ ë¼ë²¨.
			fontColor: 'black'
		});
		marker.setMap(map); // Markerê°€ í‘œì‹œë  Map ì„¤ì •.
	}

	// ëª¨ë“  ë§ˆì»¤ë¥¼ ì œê±°í•˜ëŠ” í•¨ìˆ˜
	function removeMarkers() {
		for (var i = 0; i < markers.length; i++) {
			markers[i].setMap(null);
		}
		markers = [];
	}

	// ëª…ì†Œ ë§ˆì»¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¤‘ì‹¬ì  ì´ë™
	function moveCenter() {
		var newCenter = new Tmapv2.LatLng(y, x)
		map.setCenter(newCenter);
		map.setZoom(12); // í™•ëŒ€ í¬ê¸°
	}

	// ë§›ì§‘ì˜ ì¢Œí‘œë¥¼ ì°ì–´ì¤Œ
	function addCheckMarkers(checkbox_list) {
		for (var i=0;i<checkbox_list.length;i++) { // ëª‡ ê°œë¥¼ ë½‘ì•„ë‚¼ ê²ƒì¸ì§€
			// Marker ê°ì²´ ìƒì„±.
			var marker = new Tmapv2.Marker({
				position: new Tmapv2.LatLng(location_dict[checkbox_list[i]][1], location_dict[checkbox_list[i]][0]), //Markerì˜ ì¤‘ì‹¬ì¢Œí‘œ ì„¤ì •. y, x
				icon: "http://tmapapis.sktelecom.com/upload/tmap/marker/pin_b_m_"+ i +".png", // icon ì•„ì´ì½˜ í˜•ì‹
				iconSize: new Tmapv2.Size(30, 45), // icon ì‚¬ì´ì¦ˆ ì¡°ì ˆ
				label: checkbox_list[i], // Markerì˜ ë¼ë²¨.
				fontColor: 'black'
			});
			marker.setMap(map); // Markerê°€ í‘œì‹œë  Map ì„¤ì •.
		}
	}

	// ìˆœì—´ í•¨ìˆ˜
	const getPermutations= function (arr, selectNumber) {
		const results = [];
		if (selectNumber === 1) return arr.map((value) => [value]); // 1ê°œì”© íƒí•  ë•Œ, ë°”ë¡œ ëª¨ë“  ë°°ì—´ì˜ ì›ì†Œ return

		arr.forEach((fixed, index, origin) => {
			const rest = [...origin.slice(0, index), ...origin.slice(index+1)] // í•´ë‹¹í•˜ëŠ” fixedë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë°°ì—´ 
			const permutations = getPermutations(rest, selectNumber - 1); // ë‚˜ë¨¸ì§€ì— ëŒ€í•´ ìˆœì—´ì„ êµ¬í•œë‹¤.
			const attached = permutations.map((permutation) => [fixed, ...permutation]); // ëŒì•„ì˜¨ ìˆœì—´ì— ëŒ€í•´ ë–¼ ë†“ì€(fixed) ê°’ ë¶™ì´ê¸°
			results.push(...attached); // ë°°ì—´ spread syntax ë¡œ ëª¨ë‘ë‹¤ push
		});
		return results; // ê²°ê³¼ ë‹´ê¸´ results return
	};

	// ì‹œê°„ì´ì—¬ ë©ˆì¶°ë¼!!
	function sleep(ms){
		ts1 = new Date().getTime() + ms;
		do ts2 = new Date().getTime(); while (ts2<ts1);
	}

	//ë¼ì¸ê·¸ë¦¬ê¸°
	function drawLine(arrPoint, num) {
		var polyline_;
		var lineColor="";
	
		if (num % 7 == 0) { lineColor='#ff0000' }
		else if (num % 7 == 1) { lineColor='#f06200' }
		else if (num % 7 == 2) { lineColor='#f0f300' }
		else if (num % 7 == 3) { lineColor='#00ff00' }
		else if (num % 7 == 4) { lineColor='#0000ff' }
		else if (num % 7 == 5) { lineColor='#000074' }
		else if (num % 7 == 6) { lineColor='#970cda' }
		
		//ë¼ì¸ê·¸ë¦¬ê¸°[S]
		polyline_ = new Tmapv2.Polyline({
			path : arrPoint,
			strokeColor : lineColor,
			strokeWeight : 6,
			map : map
		});
		resultdrawArr.push(polyline_);
	}

	function check_to_name() {
		// ë§›ì§‘ì˜ ì¢Œí‘œë¥¼ ì°ì–´ì£¼ê¸° ìœ„í•´
		restaurant_num = [];
		for (var i=0;i<r_checkbox_list.length;i++) {
			if (r_checkbox_list[i] == 'r_first') {
				restaurant_num.push(n_rest[0])
			} else if (r_checkbox_list[i] == 'r_second') {
				restaurant_num.push(n_rest[1])
			} else if (r_checkbox_list[i] == 'r_third') {
				restaurant_num.push(n_rest[2])
			} else if (r_checkbox_list[i] == 'r_forth') {
				restaurant_num.push(n_rest[3])
			} 
		}
		// í¬í† ì¡´ ì¢Œí‘œë¥¼ ì°ì–´ì£¼ê¸° ìœ„í•´
		photozone_num = [];
		for (var i=0;i<p_checkbox_list.length;i++) {
			if (p_checkbox_list[i] == 'p_first') {
				photozone_num.push(n_photo[0])
			} else if (p_checkbox_list[i] == 'p_second') {
				photozone_num.push(n_photo[1])
			} else if (p_checkbox_list[i] == 'p_third') {
				photozone_num.push(n_photo[2])
			}
		}
		return [...restaurant_num, ...photozone_num]
	}

	function get_distance() {
		// ëª¨ë“  ì¥ì†Œë“¤ê°„ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°
		for (var i=0;i<points.length-1;i++) {
			for (var j=i+1;j<points.length;j++) {
				console.log(points[i], '<-->', points[j])
				console.log('start:', String(location_dict[points[i]][0]), String(location_dict[points[i]][1]))
				console.log('end:', String(location_dict[points[j]][0]), String(location_dict[points[j]][1]))

				// ì¥ì†Œì™€ ì¥ì†Œê°„ì˜ ê±°ë¦¬ ê³„ì‚°
				$.ajax({
					type : "POST",
					url : "https://apis.openapi.sk.com/tmap/routes?version=1&format=json&callback=result",
					async : false, // ajax ë¥¼ ëŒë¦´ ë–„ ìˆœì°¨ì ìœ¼ë¡œ ëŒ ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ì„œ
					data : {
						"appKey" : "l7xx0bc558171c774e4ba754afa0476b3077",
						"startX" : String(location_dict[points[i]][0]),
						"startY" : String(location_dict[points[i]][1]),
						"endX" : String(location_dict[points[j]][0]),
						"endY" : String(location_dict[points[j]][1]),
						"reqCoordType" : "WGS84GEO", // ìš”ì²­ ì¢Œí‘œê³„ ì˜µì…˜
						"resCoordType" : "EPSG3857" // ì‘ë‹µ ì¢Œí‘œê³„ ì˜µì…˜
					},
					success:function(response){ //APIê°€ ì œëŒ€ë¡œ ì‘ë™í•  ê²½ìš° ì‹¤í–‰ë  ì½”ë“œ
						var resultData = response.features;
						var distance = (resultData[0].properties.totalDistance / 1000) // toFixes(1) : ì†Œìˆ˜ ì²« ì§¸ ìë¦¬ê¹Œì§€ë§Œ

						p_to_p[points[i] +','+ points[j]] = Number(distance); // ì¥ì†Œê°„ì˜ ê±°ë¦¬ë¥¼ ì‚¬ì „ì— ì €ì¥
						p_to_p[points[j] +','+ points[i]] = Number(distance);
						// var tDistance = "ì´ ê±°ë¦¬ : "+ (resultData[0].properties.totalDistance / 1000).toFixed(1) + "km,";
						// $("#result").text(tDistance);
						console.log(points[i], points[j])
						console.log(distance)
					}
				}); // ------ ajaxë¡œ ê±°ë¦¬ ë°›ì•„ì˜¤ê¸°
				// ìš”ì²­ ì‹œê°„ì´ ë„ˆë¬´ ë¹¨ë¼ ë”œë ˆì´ë¥¼ ë„£ì–´ì¤€ë‹¤.
				sleep(500); // 1ì´ˆ
			}
		} // --------- ê±°ë¦¬ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ ë°˜ë³µ
	}

	// ì²´í¬ë°•ìŠ¤ ë°˜ì˜í•˜ê¸°
	function getValue(){
        $("input[name=restau]:checked").each(function() { 
            var restau = $(this).val();
			r_checkbox_list.push(restau)
    	});
		$("input[name=photo]:checked").each(function() { 
            var photozo = $(this).val();
			p_checkbox_list.push(photozo)
    	});
	}
</script>
</head>

<script>
	region = '{{region}}';
    attraction = '{{attr}}';
    console.log(region);
    console.log(region);
    $('#region_data').val(region);
    $('#attr_data').val(attraction);
</script>

<body onload="initTmap()"> <!--í•¨ìˆ˜ í˜¸ì¶œ-->
	<div id="first_table">
		<center><table border='0' bgcolor="#444444">
			<tr><td rowspan="5" style="width:880px; height:820px;">
					<center>
						<div id="map_div" style="color:black;"></div>
						<div id="roro" style="display:None;"><br>
							<p style="font-size:130%;">
								<span>ğŸ”¸ìµœë‹¨ ê²½ë¡œ:&nbsp</span><span id="how_route"></span><span>&nbsp ì…ë‹ˆë‹¤.</span></p>
							<p style="font-size:130%;">
								<span>ğŸ”¹ì´ ê¸¸ì´:&nbsp</span><span id="how_km"></span><span>&nbsp km</span></p>
						</div>
					</center>
				</td>
				<td style="height:30px;"></td>
			</tr>
			<tr>
				<td style="width:400px; height:460px;">
					<p><span style="font-size:140%;">&nbspë§›ì§‘&nbspğŸ½</span></p>
					<div>
						<span><input type="checkbox" name="restau" value="r_first" style="white-space:nowrap;">
						<span id="first_res_link"></span>
						<span id="first_restaurant">1ë²ˆ ë§›ì§‘</div></span>
						<span><div id="first_restaurant_time"></div><div id="first_restaurant_tel"></div></span><br>
					</div>
					<div>
						<span><input type="checkbox" name="restau" value="r_second" style="white-space:nowrap;">
						<span id="second_res_link"></span>
						<span id="second_restaurant">2ë²ˆ ë§›ì§‘</div></span>
						<span><div id="second_restaurant_time"></div><div id="second_restaurant_tel"></div></span><br>
					</div>
					<div>
						<span><input type="checkbox" name="restau" value="r_third" style="white-space:nowrap;">
						<span id="third_res_link"></span>
						<span id="third_restaurant">3ë²ˆ ë§›ì§‘</div></span>
						<span><div id="third_restaurant_time"></div><div id="third_restaurant_tel"></div></span><br>
					</div>
					<div>
						<span><input type="checkbox" name="restau" value="r_forth" style="white-space:nowrap;">
						<span id="forth_res_link"></span>
						<span id="forth_restaurant">4ë²ˆ ë§›ì§‘</div></span>
						<span><div id="forth_restaurant_time"></div><div id="forth_restaurant_tel"></div></span><br>
					</div>
				</td>
			</tr>
			<tr>
				<td style="height: 130px;">
					<p><span style="font-size:140%;">&nbspí¬í† ì¡´&nbspğŸ“·</span></p>
					<div>
						<span><input type="checkbox" name="photo" value="p_first" style="white-space:nowrap;">
						<span id="first_photozone"></span>
					</div>
					<div>
						<span><input type="checkbox" name="photo" value="p_second" style="white-space:nowrap;">
						<span id="second_photozone"></span>
					</div>
					<div>
						<span><input type="checkbox" name="photo" value="p_third" style="white-space:nowrap;">
						<span id="third_photozone"></span>
					</div>
				</td>
			</tr>
			<tr>
				<td><center>
					<button id="btn_select" style="width:250px; font-weight:bold;" class="btn btn-lg btn-secondary" onclick="getValue()">ê²½ë¡œ ìƒì„±</button>
		   		</center></td>
			</tr>
			<tr>
				<td id="region_info" style="display:None;">
					<center>
						<a href="{% url 'uimage' %}" style="width:250px; font-weight:bold;" 
							class="btn btn-lg btn-primary btn-block btn-login font-weight-bold mb-2">ë‹¤ë¥¸ ì‚¬ì§„ ì—…ë¡œë“œ</a>
						<form method="post" action="{% url 'recommend'%}" id="create">
							{% csrf_token %}
							<input type="hidden" name="region_data" value="{{region}}" id="region_data">
							<input type="hidden" name="attr_data" value="{{attr}}" id="attr_data">
							<input type="submit" class="btn btn-lg btn-info btn-block btn-login text-uppercase font-weight-bold mb-2" style="width:250px;" value="ì¶”ì²œ ê´€ê´‘ì½”ìŠ¤">
						</form>
					</center>
				</td>
			</tr>
		</table></center>
	</div>
</body>

{% endblock %}

